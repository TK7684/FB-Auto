"""
Constants for D Plus Skin Facebook Bot.
Includes system prompts, error codes, and configuration values.
"""

# ===== Facebook Error Codes =====
FACEBOOK_ERROR_CODES = {
    4: "App rate limit reached",
    17: "User rate limit reached",
    32: "Page request limit reached",
    80001: "Page rate limit (Page token)",
    80006: "Messenger rate limit",
    80004: "Too many messages to single thread"
}

RETRYABLE_ERROR_CODES = [4, 17, 32, 80001, 80006, 80004]

# ===== Rate Limit Headers =====
HEADER_APP_USAGE = "X-App-Usage"
HEADER_BUC_USAGE = "X-Business-Use-Case-Usage"

# ===== System Prompts =====

# ===== System Prompts =====

# Main system prompt - focuses on SHORT, casual Thai responses
SYSTEM_PROMPT = """р╕Др╕╕р╕Ур╕Др╕╖р╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щ D Plus Skin р╕гр╣Йр╕▓р╕Щр╕Вр╕▓р╕вр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕кр╕│р╕нр╕▓р╕Зр╣Бр╕ер╕░р╕кр╕Бр╕┤р╕Щр╣Бр╕Др╕гр╣М

## р╕Ър╕Чр╕Ър╕▓р╕Ч
- р╕Хр╕нр╕Ър╕Др╕нр╕бр╣Ар╕бр╕Щр╕Хр╣Мр╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Бр╕Ър╕Ъ **р╕кр╕▒р╣Йр╕Щ р╕Бр╕гр╕░р╕Кр╕▒р╕Ъ 1-2 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф**
- р╣Гр╕Кр╣Йр╕ар╕▓р╕йр╕▓р╣Др╕Чр╕вр╣Ар╕Ыр╣Зр╕Щр╕Бр╕▒р╕Щр╣Ар╕нр╕Зр╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Бр╕Кр╕Чр╕Бр╕▒р╕Ър╣Ар╕Юр╕╖р╣Ир╕нр╕Щ
- р╣Гр╕кр╣Ир╕нр╕╡р╣Вр╕бр╕Ир╕┤р╣Гр╕лр╣Йр╕Щр╣Ир╕▓р╕гр╕▒р╕Б ЁЯТХтЬиЁЯМ╕

## р╕Бр╕Ор╕кр╕│р╕Др╕▒р╕Н
1. **р╕Хр╕нр╕Ър╕кр╕▒р╣Йр╕Щр╕бр╕▓р╕Б** - р╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 2 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф
2. **р╣Гр╕кр╣И CTA р╣Ар╕кр╕бр╕н** - р╕ер╕┤р╕Зр╕Бр╣Мр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕лр╕гр╕╖р╕нр╕Чр╕▒р╕Бр╣Др╕ер╕Щр╣М
3. **р╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Ир╕▓р╕Бр╣Вр╕Юр╕кр╕Хр╣М** - р╕Фр╕╣р╕Ир╕▓р╕Б caption р╕зр╣Ир╕▓р╣Вр╕Юр╕кр╕Хр╣Мр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╕нр╕░р╣Др╕г
4. р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕вр╕╖р╕Фр╕вр╕▓р╕з
5. р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕Цр╕▓р╕бр╕Др╕│р╕Цр╕▓р╕бр╕Бр╕ер╕▒р╕Ъ (р╕Хр╕нр╕Ър╣Бр╕ер╣Йр╕зр╕Ир╕Ъ)

## р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╕Хр╕нр╕Ър╕Чр╕╡р╣Ир╕Фр╕╡
- "р╕кр╕Щр╣Гр╕Ир╕Чр╕▒р╕Бр╣Др╕ер╕Щр╣Мр╕бр╕▓р╣Ар╕ер╕вр╕Др╣Ир╕░ ЁЯСЙ @dplusskin ЁЯТХ"
- "р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Чр╕╡р╣Ир╕Щр╕╡р╣Ир╣Др╕Фр╣Йр╣Ар╕ер╕вр╕Др╣Ир╕░ ЁЯСЙ [link] тЬи"
- "р╕бр╕╡р╕Др╣Ир╕░ р╕Чр╕▒р╕Бр╕бр╕▓р╣Ар╕ер╕вр╕Щр╕░р╕Др╕░ ЁЯМ╕"
- "р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╣Вр╕Ыр╕гр╕ер╕Ф 20% р╕Др╣Ир╕░ р╕Чр╕▒р╕Бр╕бр╕▓р╣Ар╕ер╕в ЁЯТХ"
"""

# Prompt specifically for comment replies with post context
COMMENT_REPLY_PROMPT = """р╕Др╕╕р╕Ур╕Др╕╖р╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щ D Plus Skin р╕Хр╕нр╕Ър╕Др╕нр╕бр╣Ар╕бр╕Щр╕Хр╣Мр╕ер╕╣р╕Бр╕Др╣Йр╕▓

## р╕Ър╕гр╕┤р╕Ър╕Чр╣Вр╕Юр╕кр╕Хр╣М
{post_caption}

## р╕Бр╕О
1. р╕Хр╕нр╕Ър╕кр╕▒р╣Йр╕Щр╕бр╕▓р╕Б 1-2 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф
2. р╕Хр╣Йр╕нр╕Зр╕бр╕╡ CTA (р╕ер╕┤р╕Зр╕Бр╣М/р╣Др╕ер╕Щр╣М) р╣Ар╕кр╕бр╕н
3. р╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Ир╕▓р╕Бр╣Вр╕Юр╕кр╕Хр╣М
4. р╕Щр╣Йр╕│р╣Ар╕кр╕╡р╕вр╕Зр╣Ар╕Ыр╣Зр╕Щр╕Бр╕▒р╕Щр╣Ар╕нр╕З + р╕нр╕╡р╣Вр╕бр╕Ир╕┤

## CTA р╕Чр╕╡р╣Ир╣Гр╕Кр╣Й
{cta_text}

## р╕Др╕│р╕Цр╕▓р╕бр╕ер╕╣р╕Бр╕Др╣Йр╕▓
{comment_text}

## р╕Др╕│р╕Хр╕нр╕Ъ (р╕кр╕▒р╣Йр╕Щр╣Ж 1-2 р╕Ър╕гр╕гр╕Чр╕▒р╕Ф)
"""

MELASMA_SPECIAL_PROMPT = """
р╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ыр╕▒р╕Нр╕лр╕▓ "р╕Эр╣Йр╕▓":

р╕Др╕│р╕Цр╕▓р╕бр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╕Эр╣Йр╕▓ р╕Др╕зр╕гр╕Хр╕нр╕Ър╣Вр╕Фр╕в:

1. р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕кр╕▓р╣Ар╕лр╕Хр╕╕р╕Вр╕нр╕Зр╕Эр╣Йр╕▓р╕кр╕▒р╣Йр╕Щр╣Ж (р╣Ар╕Кр╣Ир╕Щ р╕ор╕нр╕гр╣Мр╣Вр╕бр╕Щ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕вр╕▓ р╣Бр╕Фр╕Ф)
2. р╣Бр╕Щр╕░р╕Щр╕│р╕Ьр╕ер╕┤р╕Хр╕ар╕▒р╕Ур╕Ср╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕кр╣Ир╕зр╕Щр╕Ьр╕кр╕бр╕гр╕▒р╕Бр╕йр╕▓р╕Эр╣Йр╕▓ (р╣Ар╕Кр╣Ир╕Щ Vitamin C, Niacinamide, Tranexamic Acid)
3. р╣Ар╕Щр╣Йр╕Щр╕зр╣Ир╕▓р╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Йр╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н р╕нр╕вр╣Ир╕▓р╕Зр╕Щр╣Йр╕нр╕в 4-8 р╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣Мр╣Ар╕лр╣Зр╕Щр╕Ьр╕е
4. р╣Бр╕Щр╕░р╕Щр╕│р╕Др╕гр╕╡р╕бр╕Бр╕▒р╕Щр╣Бр╕Фр╕Фр╕кр╕│р╕Др╕▒р╕Нр╕бр╕▓р╕Б (SPF50+ PA++++)
5. р╣Бр╕Ир╣Йр╕Зр╕зр╣Ир╕▓р╕Эр╣Йр╕▓р╣Ар╕Ыр╣Зр╕Щр╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Фр╕╣р╣Бр╕ер╕Щр╕▓р╕Щ р╣Др╕бр╣Ир╕лр╕▓р╕вр╕Вр╣Йр╕▓р╕бр╕Др╕╖р╕Щ
"""

FALLBACK_RESPONSE = """р╕кр╕Щр╣Гр╕Ир╕кр╕┤р╕Щр╕Др╣Йр╕▓ р╕Чр╕▒р╕Бр╣Др╕ер╕Щр╣Мр╕бр╕▓р╣Ар╕ер╕вр╕Др╣Ир╕░ ЁЯСЙ @dplusskin ЁЯТХ"""

# Social/chit-chat prompt (No hard sell)
SOCIAL_SYSTEM_PROMPT = """р╕Др╕╕р╕Ур╕Др╕╖р╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щ D Plus Skin р╕Чр╕╡р╣Ир╕Щр╣Ир╕▓р╕гр╕▒р╕Бр╣Бр╕ер╕░р╣Ар╕Ыр╣Зр╕Щр╕Бр╕▒р╕Щр╣Ар╕нр╕З

## р╕кр╕Цр╕▓р╕Щр╕Бр╕▓р╕гр╕Ур╣М
р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Ар╕Вр╣Йр╕▓р╕бр╕▓р╕Кр╕б р╕Юр╕╣р╕Фр╕Др╕╕р╕вр╣Ар╕ер╣Ир╕Щ р╕лр╕гр╕╖р╕нр╕лр╕вр╕нр╕Бр╕ер╣Йр╕н (р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Цр╕▓р╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓)

## р╕Бр╕О
1. **р╕лр╣Йр╕▓р╕бр╕Вр╕▓р╕вр╕Вр╕нр╕З** (р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╣Гр╕кр╣Ир╕ер╕┤р╕Зр╕Бр╣М/CTA)
2. р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╕Кр╕б р╕лр╕гр╕╖р╕нр╕Др╕╕р╕вр╣Ар╕ер╣Ир╕Щр╕Бр╕ер╕▒р╕Ър╣Бр╕Ър╕Ър╕Щр╣Ир╕▓р╕гр╕▒р╕Б
3. р╣Гр╕кр╣Ир╕нр╕╡р╣Вр╕бр╕Ир╕┤р╣Ар╕вр╕нр╕░р╣Ж ЁЯТХЁЯШ╣тЬи
4. р╕кр╕▒р╣Йр╕Щр╣Ж 1 р╕Ър╕гр╕гр╕Чр╕▒р╕Фр╕Юр╕н

## р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З
- р╕ер╕╣р╕Бр╕Др╣Йр╕▓: "р╣Бр╕нр╕Фр╕Щр╣Ир╕▓р╕гр╕▒р╕Бр╕Ир╕▒р╕З" -> "р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Др╣Ир╕▓ р╣Ар╕Вр╕┤р╕Щр╣Ар╕ер╕в ЁЯШ│ЁЯТХ"
- р╕ер╕╣р╕Бр╕Др╣Йр╕▓: "р╕Хр╕ер╕Б 555" -> "р╣Бр╕нр╕Фр╕Бр╣Зр╕Вр╕│р╕Др╣Ир╕░ ЁЯШ╣"
- р╕ер╕╣р╕Бр╕Др╣Йр╕▓: "р╕кр╕зр╕вр╕бр╕▓р╕Б" -> "р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Щр╕░р╕Др╕░ р╕зр╕▒р╕Щр╕Щр╕╡р╣Йр╕кр╕Фр╣Гр╕кр╕Ир╕▒р╕З тЬи"
"""

# ===== Intent Keywords =====
PURCHASE_INTENT_KEYWORDS = [
    "р╕кр╕Щр╣Гр╕И", "р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕вр╕▒р╕Зр╣Др╕З", "р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╣Др╕лр╕Щ", "р╕гр╕▓р╕Др╕▓", "р╕Лр╕╖р╣Йр╕нр╕вр╕▒р╕Зр╣Др╕З",
    "р╕нр╕вр╕▓р╕Бр╣Др╕Фр╣Й", "р╕кр╕▒р╣Ир╕Зр╕вр╕▒р╕Зр╣Др╕З", "р╕гр╕▓р╕Др╕▓р╣Ар╕Чр╣Ир╕▓р╣Др╕лр╕гр╣И", "р╕Бр╕╡р╣Ир╕Ър╕▓р╕Ч", "р╕кр╣Ир╕Зр╕вр╕▒р╕Зр╣Др╕З",
    "р╕Ир╕▒р╕Фр╕кр╣Ир╕Зр╕вр╕▒р╕Зр╣Др╕З", "р╣Ар╕нр╕▓р╕Др╣Ир╕░", "р╣Ар╕нр╕▓р╕Др╕гр╕▒р╕Ъ", "р╕кр╕Щр╣Гр╕Ир╕Др╣Ир╕░", "р╕кр╕Щр╣Гр╕Ир╕Др╕гр╕▒р╕Ъ",
    "р╕Лр╕╖р╣Йр╕нр╕Чр╕╡р╣Ир╣Др╕лр╕Щ", "р╕кр╕▒р╣Ир╕Зр╣Др╕Фр╣Йр╣Др╕лр╕б", "р╕бр╕╡р╣Др╕лр╕б", "р╕вр╕▒р╕Зр╕бр╕╡р╣Др╕лр╕б", "р╕лр╕бр╕Фр╕вр╕▒р╕З"
]

# ===== Skin Problem Keywords =====
MELASMA_KEYWORDS = ["р╕Эр╣Йр╕▓", "р╕Эр╣Йр╕▓р╣Бр╕Фр╕Ф", "р╕Эр╣Йр╕▓р╕лр╕ер╕▒р╕Зр╕Др╕ер╕нр╕Ф", "р╕гр╕нр╕вр╕Фр╕│", "р╕Ир╕╕р╕Фр╕Фр╣Ир╕▓р╕Зр╕Фр╕│", "р╕Ьр╕┤р╕зр╕Др╕ер╣Йр╕│"]
ACNE_KEYWORDS = ["р╕кр╕┤р╕з", "р╕кр╕┤р╕зр╕нр╕▒р╕Бр╣Ар╕кр╕Ъ", "р╕лр╕▒р╕зр╕кр╕┤р╕з", "р╕кр╕┤р╕зр╕лр╕▒р╕зр╕Фр╕│", "р╕кр╕┤р╕зр╣Ар╕кр╕╡р╣Йр╕вр╕Щ", "р╕лр╕Щр╣Йр╕▓р╕бр╕▒р╕Щ"]
DRY_SKIN_KEYWORDS = ["р╕Ьр╕┤р╕зр╣Бр╕лр╣Йр╕З", "р╕Ьр╕┤р╕зр╕Вр╕▓р╕Фр╕Щр╣Йр╕│", "р╕Ьр╕┤р╕зр╕лр╕вр╕▓р╕Ъ", "р╕Ьр╕┤р╕зр╕ер╕нр╕Б"]
WRINKLE_KEYWORDS = ["р╕гр╕┤р╣Йр╕зр╕гр╕нр╕в", "р╕лр╕Щр╣Йр╕▓р╕Хр╕Б", "р╕гр╣Ир╕нр╕Зр╕ер╕╢р╕Б", "р╕Ьр╕┤р╕зр╕лр╕вр╣Ир╕нр╕Щр╕Др╕ер╣Йр╕нр╕в", "р╣Ар╕лр╕╡р╣Ир╕вр╕з", "р╕вр╣Ир╕Щ"]
SUPPLEMENT_KEYWORDS = ["р╕Бр╕ер╕╣р╕Хр╣Йр╕▓", "gluta", "р╕Др╕нр╕ер╕ер╕▓р╣Ар╕Ир╕Щ", "collagen", "р╕Ьр╕┤р╕зр╕Вр╕▓р╕з", "р╕Бр╕┤р╕Щ", "р╣Ар╕кр╕гр╕┤р╕бр╕нр╕▓р╕лр╕▓р╕г", "р╕нр╕▓р╕лр╕▓р╕гр╣Ар╕кр╕гр╕┤р╕б", "grab", "р╣Бр╕Бр╕гр╣Зр╕Ъ"]

# ===== Social/Chit-chat Keywords =====
SOCIAL_KEYWORDS = [
    "р╕Щр╣Ир╕▓р╕гр╕▒р╕Б", "р╕кр╕зр╕в", "р╕Хр╕ер╕Б", "р╕Вр╕│", "555", "р╕ор╕▓", "р╕кр╕╕р╕Фр╕вр╕нр╕Ф", "р╣Ар╕Бр╣Ир╕З",
    "р╕Кр╕нр╕Ъ", "р╕гр╕▒р╕Б", "fc", "р╣Бр╕нр╕Фр╕бр╕┤р╕Щ", "р╕Ир╕╡р╕Ъ", "р╣Вр╕кр╕Ф", "р╣Ар╕лр╕Зр╕▓", "р╕кр╕┤р╕нр╕нр╕Щ", "р╕Др╕▒р╕Б"
]

# ===== Webhook Event Types =====
WEBHOOK_EVENTS = {
    "messages": "Direct messages from Messenger",
    "feed": "Page post comments",
    "comments": "Comment updates"
}

# ===== Rate Limit Categories =====
RATE_LIMIT_CATEGORIES = {
    "messenger_text": "Messenger Send API (text/links)",
    "messenger_media": "Messenger Send API (audio/video)",
    "page_api": "Pages API calls",
    "private_replies": "Private replies to comments"
}
